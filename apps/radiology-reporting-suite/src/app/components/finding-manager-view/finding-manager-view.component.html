<div class="flex flex-col gap-2 w-full">
  <p-button
    class="flex self-end"
    [label]="
      mode() === ChangeModes.Update ? 'Update Finding' : ' Create Finding'
    "
    [disabled]="formGroup.invalid"
    [pTooltip]="
      mode() === ChangeModes.Update ? 'Update Finding' : ' Create Finding'
    "
    tooltipPosition="bottom"
    (onClick)="onSave()" />

  <p-divider />

  <div class="flex h-full min-h-0 overflow-auto">
    <div [formGroup]="formGroup" class="flex flex-col gap-2 w-full">
      <div class="flex flex-row gap-8">
        <div>
          <p-floatLabel>
            <input
              pInputText
              id="findingName"
              type="text"
              formControlName="name" />
            <label for="findingName">Name</label>
          </p-floatLabel>

          @let nameControl = formGroup.get('name');

          @if (nameControl?.hasError('required') && nameControl?.dirty) {
            <small id="findingName-error" class="p-error"
              >Name is required</small
            >
          }
        </div>

        <div class="flex gap-2">
          <label for="findingIsNormal">Is Normal</label>

          <p-inputSwitch id="findingIsNormal" formControlName="isNormal" />
        </div>
      </div>

      <div>
        <label for="findingDescription">Description</label>

        <radio-editor
          id="findingDescription"
          maxHeight="15rem"
          formControlName="description">
        </radio-editor>

        @let descriptionControl = formGroup.get('description');

        @if (
          descriptionControl?.hasError('required') && descriptionControl?.dirty
        ) {
          <small class="p-error"> Description is required </small>
        }
      </div>

      <div>
        <label for="findingImpression">Impression</label>

        <radio-editor
          id="findingImpression"
          maxHeight="10rem"
          formControlName="impression">
        </radio-editor>
      </div>

      <div>
        <label for="findingRecommendation">Recommendation</label>

        <radio-editor
          id="findingRecommendation"
          maxHeight="10rem"
          formControlName="recommendation">
        </radio-editor>
      </div>
    </div>
  </div>
</div>
